# WC3 èµ„æºæµè§ˆå™¨ä½¿ç”¨æŒ‡å—

## ğŸ“– æ¦‚è¿°

WC3 èµ„æºæµè§ˆå™¨æ˜¯ä¸€ä¸ªé›†æˆåœ¨å±æ€§é¢æ¿ä¸­çš„å¯è§†åŒ–çº¹ç†é€‰æ‹©å·¥å…·ï¼Œå…è®¸ç”¨æˆ·ç›´æ¥æµè§ˆ Warcraft 3 å®¢æˆ·ç«¯å†…çš„èµ„æºæ–‡ä»¶ï¼ˆBLP çº¹ç†ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥è·¯å¾„ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åœ¨å±æ€§é¢æ¿ä¸­ä½¿ç”¨

æ‰€æœ‰æ”¯æŒçº¹ç†è·¯å¾„çš„å±æ€§ç°åœ¨éƒ½å¸¦æœ‰ä¸€ä¸ª **ğŸ“ æµè§ˆæŒ‰é’®**ï¼š

```tsx
// ç¤ºä¾‹ï¼šçº¹ç†å±æ€§
<FilePath
  label="åº”ç”¨å†…çº¹ç†è·¯å¾„"
  value={selectedFrame.diskTexture || ''}
  onChange={(value) => handleChange('diskTexture', value)}
  showWC3Browser={true}  // é»˜è®¤å¼€å¯
/>
```

### 2. æ‰“å¼€æµè§ˆå™¨

ç‚¹å‡»ä»»ä½•è·¯å¾„è¾“å…¥æ¡†å³ä¾§çš„ **ğŸ“** æŒ‰é’®å³å¯æ‰“å¼€ WC3 èµ„æºæµè§ˆå™¨ã€‚

### 3. æµè§ˆå’Œé€‰æ‹©

- **å•å‡»æ–‡ä»¶å¤¹**: è¿›å…¥å­ç›®å½•
- **å•å‡»æ–‡ä»¶**: é€‰ä¸­çº¹ç†ï¼ˆåº•éƒ¨æ˜¾ç¤ºè·¯å¾„ï¼‰
- **åŒå‡»æ–‡ä»¶**: ç«‹å³é€‰æ‹©å¹¶å…³é—­æµè§ˆå™¨
- **è¿”å›æŒ‰é’® (â¬…)**: è¿”å›ä¸Šçº§ç›®å½•

## ğŸ¨ åŠŸèƒ½ç‰¹æ€§

### è§†å›¾æ¨¡å¼

- **ç½‘æ ¼è§†å›¾ (âŠ)**: å¤§å›¾æ ‡+ç¼©ç•¥å›¾é¢„è§ˆ
- **åˆ—è¡¨è§†å›¾ (â˜°)**: ç´§å‡‘åˆ—è¡¨æ˜¾ç¤º

### æœç´¢åŠŸèƒ½

åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯ï¼ŒæŒ‰å›è½¦é”®æœç´¢ï¼š

```
ç¤ºä¾‹æœç´¢ï¼š
- "button" â†’ æŸ¥æ‰¾æ‰€æœ‰åŒ…å« button çš„ BLP æ–‡ä»¶
- "command" â†’ æŸ¥æ‰¾å‘½ä»¤æŒ‰é’®ç›¸å…³çº¹ç†
- "glue" â†’ æŸ¥æ‰¾ç•Œé¢å…ƒç´ çº¹ç†
```

### å¸¸ç”¨ç›®å½•å¿«æ·è®¿é—®

æµè§ˆå™¨é¡¶éƒ¨æä¾›ä»¥ä¸‹å¸¸ç”¨ç›®å½•å¿«é€Ÿè·³è½¬ï¼š

| ç›®å½• | å†…å®¹ |
|------|------|
| **Console/Human** | äººæ—æ¸¸æˆå†… UI å…ƒç´  |
| **Glues** | ä¸»èœå•ç•Œé¢å…ƒç´  |
| **BattleNet** | æˆ˜ç½‘ç•Œé¢å…ƒç´  |
| **ToolTips** | æç¤ºæ¡†ç›¸å…³çº¹ç† |
| **CommandButtons** | å‘½ä»¤æŒ‰é’®å›¾æ ‡ |
| **Feedback** | åé¦ˆæ•ˆæœçº¹ç† |
| **Textures** | é€šç”¨çº¹ç†åº“ |

### ç¼©ç•¥å›¾é¢„è§ˆ

- è‡ªåŠ¨åŠ è½½å‰ 20 ä¸ªæ–‡ä»¶çš„ç¼©ç•¥å›¾
- BLP æ ¼å¼è‡ªåŠ¨è§£ç æ˜¾ç¤º
- åƒç´ çº§æ¸²æŸ“ä¿æŒæ¸…æ™°åº¦

## ğŸ“‚ æ–‡ä»¶ç»“æ„

### ç»„ä»¶ç»“æ„

```
src/components/
â”œâ”€â”€ WC3TextureBrowser.tsx       # ä¸»ç»„ä»¶ (400è¡Œ)
â”œâ”€â”€ WC3TextureBrowser.css       # æ ·å¼æ–‡ä»¶ (600è¡Œ)
â””â”€â”€ PropertyEditors.tsx         # FilePath å¢å¼º
```

### æ ¸å¿ƒæ¥å£

```typescript
interface WC3TextureBrowserProps {
  onSelect: (path: string) => void;    // é€‰æ‹©å›è°ƒ
  onClose: () => void;                  // å…³é—­å›è°ƒ
  currentPath?: string;                 // å½“å‰è·¯å¾„ (é¢„é€‰)
}

interface TextureItem {
  path: string;          // å®Œæ•´è·¯å¾„
  name: string;          // æ–‡ä»¶/ç›®å½•å
  isDirectory: boolean;  // æ˜¯å¦ä¸ºç›®å½•
  preview?: string;      // é¢„è§ˆå›¾ Data URL
}
```

## ğŸ”§ æŠ€æœ¯å®ç°

### MPQ é›†æˆ

```typescript
import { mpqManager } from '../utils/mpqManager';

// åˆ—å‡ºç›®å½•
const files = mpqManager.listDirectory('UI\\Widgets\\Console\\Human\\');

// æœç´¢æ–‡ä»¶
const results = mpqManager.searchFiles('*button*.blp');
```

### çº¹ç†åŠ è½½

```typescript
import { textureLoader } from '../utils/textureLoader';

// åŠ è½½çº¹ç†é¢„è§ˆ
const dataUrl = await textureLoader.loadTexture(filePath);

// è‡ªåŠ¨ BLP è§£ç 
// è‡ªåŠ¨ç¼“å­˜ç®¡ç†
// è‡ªåŠ¨ç±»å‹æ£€æµ‹
```

### æ‡’åŠ è½½ä¼˜åŒ–

```tsx
// FilePath ç»„ä»¶ä¸­
{showBrowser && (
  <React.Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
    {(() => {
      const WC3TextureBrowser = require('./WC3TextureBrowser').WC3TextureBrowser;
      return <WC3TextureBrowser {...props} />;
    })()}
  </React.Suspense>
)}
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. çº¹ç†è·¯å¾„é€‰æ‹©

```typescript
// åº”ç”¨å†…çº¹ç†
diskTexture: "UI/Widgets/Console/Human/CommandButton/CommandButton.blp"

// æ¸¸æˆå†…çº¹ç†
wc3Texture: "ReplaceableTextures/CommandButtons/BTNHeroArchMage.blp"
```

### 2. èƒŒæ™¯å’Œè¾¹æ¡†

```typescript
// BACKDROP èƒŒæ™¯
backdropBackground: "UI/Widgets/Glues/GlueScreen-Background.blp"

// è¾¹æ¡†çº¹ç†
backdropEdgeFile: "UI/Widgets/Glues/GlueScreen-Frame.blp"
```

### 3. æŒ‰é’®çŠ¶æ€çº¹ç†

```typescript
// æ­£å¸¸çŠ¶æ€
controlBackdrop: "UI/Widgets/Glues/GlueScreen-Button-Normal.blp"

// æŒ‰ä¸‹çŠ¶æ€
controlPushedBackdrop: "UI/Widgets/Glues/GlueScreen-Button-Pushed.blp"

// ç¦ç”¨çŠ¶æ€
controlDisabledBackdrop: "UI/Widgets/Glues/GlueScreen-Button-Disabled.blp"
```

## âš™ï¸ é…ç½®é€‰é¡¹

### FilePath ç»„ä»¶å±æ€§

```typescript
<FilePath
  label="çº¹ç†è·¯å¾„"
  value={value}
  onChange={onChange}
  placeholder="è¾“å…¥æˆ–æµè§ˆé€‰æ‹©"
  suggestions={['UI/Widgets/', 'ReplaceableTextures/']}
  showWC3Browser={true}  // æ˜¯å¦æ˜¾ç¤ºæµè§ˆå™¨æŒ‰é’®
  disabled={false}
  tooltip="é€‰æ‹© WC3 çº¹ç†æ–‡ä»¶"
/>
```

### æµè§ˆå™¨åˆå§‹åŒ–

æµè§ˆå™¨ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹å½“å‰è·¯å¾„æ‰€åœ¨ç›®å½•
2. åŠ è½½è¯¥ç›®å½•çš„æ–‡ä»¶åˆ—è¡¨
3. é¢„é€‰å½“å‰æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
4. é¢„åŠ è½½å‰ 20 ä¸ªç¼©ç•¥å›¾

## ğŸ¨ UI/UX è®¾è®¡

### å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Œ WC3 èµ„æºæµè§ˆå™¨            âœ•     â”‚ â† æ ‡é¢˜æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬… UI\Widgets\Console\Human\         â”‚ â† å¯¼èˆªæ 
â”‚ ğŸ” [æœç´¢æ¡†]                âŠ â˜°    â”‚ â† æœç´¢+è§†å›¾åˆ‡æ¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¸¸ç”¨: [Console] [Glues] [BattleNet] â”‚ â† å¿«æ·ç›®å½•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ğŸ“ SubFolder   ğŸ–¼ï¸ Texture1.blp   â”‚ â† å†…å®¹åŒº
â”‚  ğŸ–¼ï¸ Texture2   ğŸ–¼ï¸ Texture3.blp   â”‚   (ç½‘æ ¼/åˆ—è¡¨)
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·²é€‰æ‹©: UI\...\Texture1.blp         â”‚ â† çŠ¶æ€æ 
â”‚                     [å–æ¶ˆ] [ç¡®å®š]   â”‚ â† æ“ä½œæŒ‰é’®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¢œè‰²æ–¹æ¡ˆ

- **èƒŒæ™¯**: #1e1e1e (ä¸»å®¹å™¨), #1a1a1a (å†…å®¹åŒº)
- **è¾¹æ¡†**: #333 (åˆ†éš”çº¿), #4a9eff (é€‰ä¸­/ç„¦ç‚¹)
- **æ–‡æœ¬**: #fff (ä¸»æ–‡æœ¬), #aaa (æ¬¡è¦æ–‡æœ¬), #888 (æç¤º)
- **æŒ‰é’®**: #4a9eff (ä¸»æŒ‰é’®), #333 (æ¬¡è¦æŒ‰é’®)
- **é«˜äº®**: #2a3a4a (é€‰ä¸­é¡¹èƒŒæ™¯)

### åŠ¨ç”»æ•ˆæœ

```css
/* æ·¡å…¥ */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* æ»‘å…¥ */
@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* æ—‹è½¬åŠ è½½ */
@keyframes spin {
  to { transform: rotate(360deg); }
}
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: æµè§ˆå™¨æ˜¾ç¤º"æ²¡æœ‰æ‰¾åˆ°çº¹ç†æ–‡ä»¶"

**A**: ç¡®ä¿å·²æ­£ç¡®åŠ è½½ MPQ æ¡£æ¡ˆï¼š

```typescript
// 1. è®¾ç½® War3 è·¯å¾„
await mpqManager.setWar3Path('C:/Games/Warcraft III');

// 2. åŠ è½½æ ‡å‡†æ¡£æ¡ˆ
await mpqManager.loadStandardArchives();

// 3. æ£€æŸ¥çŠ¶æ€
const status = mpqManager.getStatus();
console.log('å·²åŠ è½½æ¡£æ¡ˆ:', status.archivesLoaded);
console.log('æ–‡ä»¶æ€»æ•°:', status.totalFiles);
```

### Q: ç¼©ç•¥å›¾ä¸æ˜¾ç¤º

**A**: å¯èƒ½åŸå› ï¼š
1. BLP æ–‡ä»¶æŸåæˆ–æ ¼å¼ä¸æ”¯æŒ
2. çº¹ç†æœªåœ¨ç¼“å­˜ä¸­ï¼ˆç­‰å¾…åŠ è½½ï¼‰
3. TextureLoader æœªæ­£ç¡®åˆå§‹åŒ–

### Q: æœç´¢é€Ÿåº¦æ…¢

**A**: ä¼˜åŒ–å»ºè®®ï¼š
1. ä½¿ç”¨æ›´å…·ä½“çš„æœç´¢è¯
2. é™åˆ¶æœç´¢èŒƒå›´ï¼ˆå…ˆè¿›å…¥å­ç›®å½•ï¼‰
3. ç¡®ä¿ MPQ ç¼“å­˜å·²å»ºç«‹

### Q: å¦‚ä½•ç¦ç”¨æµè§ˆå™¨æŒ‰é’®ï¼Ÿ

**A**: è®¾ç½® `showWC3Browser={false}`ï¼š

```tsx
<FilePath
  label="è‡ªå®šä¹‰è·¯å¾„"
  value={value}
  onChange={onChange}
  showWC3Browser={false}  // ç¦ç”¨æµè§ˆå™¨
/>
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥

1. **æ–‡ä»¶åˆ—è¡¨ç¼“å­˜**: MPQManager è‡ªåŠ¨ç¼“å­˜æ‰€æœ‰æ–‡ä»¶è·¯å¾„
2. **çº¹ç†é¢„è§ˆç¼“å­˜**: TextureLoader LRU ç¼“å­˜ï¼ˆé»˜è®¤ 100 é¡¹ï¼‰
3. **æ‡’åŠ è½½**: ä»…åŠ è½½å¯è§åŒºåŸŸçš„å‰ 20 ä¸ªç¼©ç•¥å›¾

### æ€§èƒ½æŒ‡æ ‡

```
æ–‡ä»¶åˆ—è¡¨åŠ è½½: ~50ms (å·²ç¼“å­˜) / ~500ms (é¦–æ¬¡)
ç¼©ç•¥å›¾åŠ è½½: ~2-5ms/ä¸ª (BLP è§£ç )
æœç´¢æ“ä½œ: ~10ms (æ­£åˆ™åŒ¹é…)
è§†å›¾åˆ‡æ¢: <16ms (60fps)
```

## ğŸ”„ æœªæ¥æ”¹è¿›

- [ ] æ”¯æŒæ‹–æ‹½æ’åº
- [ ] æ”¶è—å¤¹åŠŸèƒ½
- [ ] æœ€è¿‘ä½¿ç”¨å†å²
- [ ] è‡ªå®šä¹‰ç›®å½•ä¹¦ç­¾
- [ ] æ‰¹é‡å¯¼å‡ºåŠŸèƒ½
- [ ] çº¹ç†ä¿¡æ¯é¢æ¿ï¼ˆå°ºå¯¸ã€æ ¼å¼ã€å‹ç¼©ç±»å‹ï¼‰
- [ ] å¯¹æ¯”è§†å›¾ï¼ˆå¯¹æ¯”ä¸¤ä¸ªçº¹ç†ï¼‰
- [ ] é¢œè‰²ç­›é€‰ï¼ˆæŒ‰ä¸»è‰²è°ƒè¿‡æ»¤ï¼‰

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [BLP è§£ç å™¨æ–‡æ¡£](./BLP_DECODER_GUIDE.md)
- [MPQ ç®¡ç†å™¨æ–‡æ¡£](./MPQ_MANAGER_GUIDE.md)
- [çº¹ç†åŠ è½½å™¨æ–‡æ¡£](./TEXTURE_LOADER_GUIDE.md)
- [PropertyEditors API](./PROPERTY_EDITORS_API.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ”¹è¿›æ­¤åŠŸèƒ½ï¼

---

**æœ€åæ›´æ–°**: 2025å¹´11æœˆ7æ—¥  
**ç‰ˆæœ¬**: 1.0.0  
**ä½œè€…**: Warcraft III UI Designer Team
